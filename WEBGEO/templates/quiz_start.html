{% block content %}
  <h1>{{ quiz.title }}</h1>
  <h2>Question {{ current_question }} of {{ quiz.questions.count }}</h2>

  <div id="question-container">
    {% if question.question_type == 'ChooseObject' %}
        {% include 'choose_object.html' with question=question %}
    {% elif question.question_type == 'MarkLocation' %}
        {% include 'mark_location.html' with question=question %}
    {% elif question.question_type == 'EnterText' %}
        {% include 'enter_text.html' with question=question %}
    {% endif %}
  </div>

  <div id="navigation-container">
    {% if has_prev_question %}
      <a href="{% url 'quiz_question' quiz.id prev_question_number %}" class="btn btn-secondary">Prev</a>
    {% endif %}

    {% if has_next_question %}
      <a href="{% url 'quiz_question' quiz.id next_question_number %}" class="btn btn-secondary">Next</a>
    {% else %}
      <a href="{% url 'quiz_result' quiz.id %}" class="btn btn-primary">Submit</a>
    {% endif %}
  </div>

<form method="post" action="{% url 'quiz_submit_answer' quiz_attempt.id %}">
  {% csrf_token %}
  <p>{{ current_question }}</p>
  <ul>
    {% for answer in current_question.answer_set.all %}
    <li>
      <label>
        <input type="radio" name="answer_id" value="{{ answer.id }}">
        {{ answer.text }}
      </label>
    </li>
    {% endfor %}
  </ul>
  <input type="submit" value="Submit">
</form>

{% if not quiz_attempt.is_finished %}
  <form method="post" action="{% url 'quiz_submit_answer' quiz_attempt.id %}">
    {% csrf_token %}
    <p>{{ current_question }}</p>
    <ul>
      {% for answer in current_question.answer_set.all %}
      <li>
        <label>
          <input type="radio" name="answer_id" value="{{ answer.id }}">
          {{ answer.text }}
        </label>
      </li>
      {% endfor %}
    </ul>
    <input type="submit" value="Submit">
  </form>
  <hr>
  <a href="{% url 'quiz_next_question' quiz_attempt.id %}">Next Question</a>
{% else %}
  <p>Congratulations, you have completed the quiz!</p>
  <a href="{% url 'quiz_result' quiz_attempt.quiz.id %}">View Results</a>
{% endif %}

{% endblock %}